# 需求分析

## 一、使用情形

首先分析一下其他类似应用的使用过程，以清晰本项目的设计内容和具体的需求，下文将以`jellyfin`为例。

- 在安装好`jellyfin`之后，我们首先需要将资源添加到某个地方，通常是本地的一个文件夹下
- 然后我们需要在`jellyfin`的管理页面添加媒体库，然后将你的资源所在的目录添加到该媒体库中。`jellyfin`触发扫描操作，首先识别资源，获取关键信息，然后在网络通过这些信息获取该资源的元数据（图片，简介等），然后保存在指定位置。
- 然后`jellyfin`为每一个资源生成一个页面，并用元数据进行填充，最后将网站发布到某个端口，用户即可进行访问。
- 用户点开某个视频的播放按钮，`jellyfin`调用播放器对视频进行播放。通常来说，`mp4`文件不会进行转码，将直接进行播放，而`mkv`等格式将进行转码然后发送到播放器进行播放。



## 二、需求总结

**需求1**：资源文件需要能够灵活分布，以一个视频为例，它可以只有一个视频文件，音频轨道和字幕轨道以及其他内容可以包含在同一个文件中，也可以将其单独放置。总之，资源的形式比较灵活，甚至也有人通过 RSS 订阅网络资源，当有人上传新资源时自动下载，此时的分布就完全取决于上传者所上传资源的分布情况。

**需求2**：最好是将管理页面和用户页面分开，不存在管理员账户。管理员应该通过管理页进入管理，管理页需要进行加密。

**需求3**：服务端保存数据的目录要足够清晰，便于管理

**需求4**：获取元数据的网络数据库在媒体库建立时应该可以选择多个。在自动获取完元数据后需要将该元数据的来源标注在管理员资源页面中。

**需求5**：播放器最好能够直接播放`mkv`等文件格式，例如先分解`mkv`文件中的各个轨道，将所有轨道分解发送到用户设备中，让用户设备进行统一播放。重要的是播放器的操作逻辑、字幕的加载速度和字体的加载这三个部分。
